<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Song Structure Tags Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .test-container { 
            background: white; 
            padding: 20px; 
            border-radius: 8px; 
            max-width: 600px;
            margin: 0 auto;
        }
        .song-lyrics { 
            background: #fafafa; 
            padding: 15px; 
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            line-height: 1.6;
        }
        
        /* Copy the styles we just added */
        .chord {
            color: #2563eb;
            font-weight: bold;
        }
        
        .chord-line {
            margin-bottom: -4px;
            white-space: pre;
            font-weight: bold;
            color: #2563eb;
            margin-bottom: -1px;
        }

        .song-structure-tag {
            margin: 15px 0 10px 0;
            padding: 8px 0;
            border-bottom: 2px solid #2563eb;
            text-align: center;
        }

        .song-structure-tag strong {
            color: #2563eb;
            font-size: 1.1em;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .lyric-line { margin: 4px 0; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Song Structure Tags Test</h1>
        <div class="song-lyrics" id="lyrics-test">
            <!-- Test lyrics will be inserted here -->
        </div>
        
        <h2>Supported Tags</h2>
        <ul>
            <li>Verse, Chorus, Bridge</li>
            <li>Pre-Chorus, Intro, Outro</li>
            <li>Interlude, Solo, Refrain</li>
            <li>Tag, Coda, Instrumental</li>
            <li>Break, Hook, Breakdown, Drop, Build</li>
        </ul>
    </div>

    <script>
        // Simulate the regex and formatting logic
        const STRUCTURE_TAG_REGEX = /^\s*[\[\(]?\s*(verse|chorus|bridge|pre-chorus|prechorus|intro|outro|interlude|solo|refrain|tag|coda|instrumental|break|hook|breakdown|drop|build)\s*[\d\w]*\s*[\]\)]?\s*:?\s*$/i;
        
        const testLyrics = `[Verse 1]
Amazing grace how sweet the sound
That saved a wretch like me
I once was lost but now I'm found
Was blind but now I see

[Chorus]
How precious did that grace appear
The hour I first believed

(Verse 2)
'Twas grace that taught my heart to fear
And grace my fears relieved

Chorus:
How precious did that grace appear
The hour I first believed

[Bridge]
When we've been there ten thousand years
Bright shining as the sun

OUTRO
Amazing grace how sweet the sound`;

        function formatTestLyrics(lyrics) {
            const lines = lyrics.split('\n');
            let output = [];

            for (let i = 0; i < lines.length; i++) {
                const line = lines[i];

                if (line.trim() === '') {
                    output.push(`<div class="lyric-line">${line}</div>`);
                    continue;
                }

                // Check for song structure tags
                if (STRUCTURE_TAG_REGEX.test(line.trim())) {
                    output.push(`<div class="lyric-line song-structure-tag"><strong>${line.trim()}</strong></div>`);
                    continue;
                }

                output.push(`<div class="lyric-line">${line}</div>`);
            }

            return output.join('');
        }

        // Apply the formatting
        document.getElementById('lyrics-test').innerHTML = formatTestLyrics(testLyrics);
    </script>
</body>
</html>